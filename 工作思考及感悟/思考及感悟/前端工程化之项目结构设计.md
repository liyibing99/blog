# 前端工程化之项目结构设计

良好的项目结构是前端工程化的基础，它直接影响项目的可维护性、可扩展性和开发效率。本文将详细介绍前端项目结构设计的最佳实践。

## 项目结构设计原则

### 1. 单一职责原则

每个目录和文件应该有明确的职责，避免功能混杂。

### 2. 按功能划分

根据业务功能而非技术类型来组织代码，使相关代码集中在一起。

### 3. 可扩展性

项目结构应该能够随着项目增长而扩展，不需要频繁重构。

### 4. 清晰的层次

建立清晰的目录层次，便于快速定位代码。

## 通用项目结构

### 基础结构

```
project-root/
├── public/                 # 静态资源
│   ├── index.html
│   ├── favicon.ico
│   └── assets/
├── src/                    # 源代码
│   ├── assets/            # 资源文件
│   ├── components/        # 通用组件
│   ├── pages/             # 页面组件
│   ├── hooks/             # 自定义 Hooks
│   ├── services/          # API 服务
│   ├── store/             # 状态管理
│   ├── utils/             # 工具函数
│   ├── types/             # TypeScript 类型定义
│   ├── styles/            # 全局样式
│   ├── constants/         # 常量定义
│   ├── config/            # 配置文件
│   └── main.js            # 入口文件
├── tests/                 # 测试文件
├── docs/                  # 文档
├── .gitignore
├── .eslintrc.js
├── .prettierrc.js
├── package.json
└── README.md
```

### 详细结构说明

```
src/
├── assets/                # 资源文件
│   ├── images/           # 图片
│   ├── fonts/            # 字体
│   ├── icons/            # 图标
│   └── styles/           # 全局样式文件
│       ├── variables.scss
│       ├── mixins.scss
│       └── global.scss
├── components/           # 通用组件
│   ├── common/           # 通用基础组件
│   │   ├── Button/
│   │   ├── Input/
│   │   └── Modal/
│   ├── layout/           # 布局组件
│   │   ├── Header/
│   │   ├── Footer/
│   │   └── Sidebar/
│   └── business/         # 业务组件
│       ├── UserCard/
│       └── ProductList/
├── pages/                # 页面组件
│   ├── Home/
│   │   ├── index.jsx
│   │   ├── components/
│   │   └── styles/
│   ├── About/
│   └── Contact/
├── hooks/                # 自定义 Hooks
│   ├── useAuth.js
│   ├── useFetch.js
│   └── useWindowSize.js
├── services/             # API 服务
│   ├── api.js            # API 配置
│   ├── auth.js           # 认证服务
│   ├── user.js           # 用户服务
│   └── product.js        # 产品服务
├── store/                # 状态管理
│   ├── index.js
│   ├── modules/
│   │   ├── auth.js
│   │   ├── user.js
│   │   └── product.js
│   └── types.js
├── utils/                # 工具函数
│   ├── request.js        # 请求封装
│   ├── storage.js        # 本地存储
│   ├── validate.js       # 验证函数
│   └── format.js         # 格式化函数
├── types/                # TypeScript 类型
│   ├── api.ts
│   ├── user.ts
│   └── common.ts
├── constants/            # 常量定义
│   ├── api.js
│   ├── routes.js
│   └── config.js
├── config/               # 配置文件
│   ├── env.js
│   └── index.js
├── router/               # 路由配置
│   ├── index.js
│   └── routes.js
├── App.jsx               # 根组件
└── main.js               # 入口文件
```

## React 项目结构

### Create React App 结构

```
my-react-app/
├── public/
│   ├── index.html
│   ├── favicon.ico
│   └── manifest.json
├── src/
│   ├── assets/
│   ├── components/
│   │   ├── common/
│   │   └── layout/
│   ├── pages/
│   │   ├── Home/
│   │   ├── About/
│   │   └── Dashboard/
│   ├── hooks/
│   ├── services/
│   ├── store/
│   │   ├── index.js
│   │   └── slices/
│   ├── utils/
│   ├── types/
│   ├── constants/
│   ├── config/
│   ├── router/
│   ├── App.jsx
│   └── index.js
├── tests/
├── .env
├── .eslintrc.js
├── .prettierrc.js
├── package.json
└── README.md
```

### Next.js 项目结构

```
my-nextjs-app/
├── public/
│   ├── images/
│   └── fonts/
├── src/
│   ├── app/                    # App Router
│   │   ├── layout.js
│   │   ├── page.js
│   │   ├── globals.css
│   │   ├── about/
│   │   │   └── page.js
│   │   └── dashboard/
│   │       └── page.js
│   ├── components/             # 组件
│   │   ├── ui/                # UI 组件
│   │   ├── layout/            # 布局组件
│   │   └── features/          # 功能组件
│   ├── lib/                   # 工具库
│   │   ├── api.js
│   │   ├── utils.js
│   │   └── constants.js
│   ├── hooks/                 # 自定义 Hooks
│   ├── store/                 # 状态管理
│   ├── types/                 # TypeScript 类型
│   ├── styles/                # 样式文件
│   └── config/                # 配置文件
├── tests/
├── .env.local
├── .eslintrc.js
├── next.config.js
├── package.json
└── README.md
```

## Vue 项目结构

### Vue 3 项目结构

```
my-vue-app/
├── public/
│   ├── index.html
│   └── favicon.ico
├── src/
│   ├── assets/
│   │   ├── images/
│   │   ├── fonts/
│   │   └── styles/
│   ├── components/            # 组件
│   │   ├── common/           # 通用组件
│   │   ├── layout/           # 布局组件
│   │   └── business/         # 业务组件
│   ├── views/                 # 页面视图
│   │   ├── Home.vue
│   │   ├── About.vue
│   │   └── Dashboard.vue
│   ├── router/                # 路由配置
│   │   └── index.js
│   ├── store/                 # 状态管理
│   │   ├── index.js
│   │   └── modules/
│   ├── api/                   # API 服务
│   │   ├── index.js
│   │   ├── auth.js
│   │   └── user.js
│   ├── composables/           # 组合式函数
│   │   ├── useAuth.js
│   │   └── useFetch.js
│   ├── utils/                 # 工具函数
│   │   ├── request.js
│   │   ├── storage.js
│   │   └── validate.js
│   ├── types/                 # TypeScript 类型
│   ├── constants/             # 常量定义
│   ├── config/                # 配置文件
│   ├── directives/            # 自定义指令
│   ├── plugins/               # 插件
│   ├── App.vue
│   └── main.js
├── tests/
├── .env
├── .eslintrc.js
├── .prettierrc.js
├── package.json
└── README.md
```

### Nuxt 3 项目结构

```
my-nuxt-app/
├── public/
│   ├── images/
│   └── fonts/
├── src/
│   ├── assets/
│   ├── components/
│   │   ├── common/
│   │   └── features/
│   ├── composables/
│   ├── layouts/
│   │   ├── default.vue
│   │   └── auth.vue
│   ├── pages/
│   │   ├── index.vue
│   │   ├── about.vue
│   │   └── dashboard/
│   ├── plugins/
│   ├── stores/
│   ├── utils/
│   ├── types/
│   ├── middleware/
│   ├── server/
│   │   ├── api/
│   │   └── routes/
│   ├── app.vue
│   └── nuxt.config.ts
├── tests/
├── .env
├── .eslintrc.js
├── package.json
└── README.md
```

## 微前端项目结构

### 主应用结构

```
main-app/
├── public/
├── src/
│   ├── assets/
│   ├── components/
│   ├── layouts/
│   ├── pages/
│   ├── micro-frontend/        # 微前端配置
│   │   ├── apps.js           # 子应用配置
│   │   └── lifecycle.js      # 生命周期钩子
│   ├── router/
│   ├── store/
│   ├── utils/
│   ├── App.jsx
│   └── main.js
├── tests/
└── package.json
```

### 子应用结构

```
sub-app-1/
├── public/
├── src/
│   ├── assets/
│   ├── components/
│   ├── pages/
│   ├── router/
│   ├── store/
│   ├── utils/
│   ├── public-path.js        # 微前端路径配置
│   ├── App.jsx
│   └── main.js
├── tests/
└── package.json
```

## Monorepo 项目结构

### 使用 pnpm workspace

```
monorepo/
├── apps/                     # 应用
│   ├── web/                 # Web 应用
│   │   ├── src/
│   │   ├── public/
│   │   └── package.json
│   ├── admin/               # 管理后台
│   │   ├── src/
│   │   ├── public/
│   │   └── package.json
│   └── mobile/              # 移动应用
│       ├── src/
│       ├── public/
│       └── package.json
├── packages/                 # 共享包
│   ├── ui/                  # UI 组件库
│   │   ├── src/
│   │   └── package.json
│   ├── utils/               # 工具函数库
│   │   ├── src/
│   │   └── package.json
│   ├── types/               # 类型定义
│   │   ├── src/
│   │   └── package.json
│   └── config/              # 共享配置
│       ├── eslint/
│       ├── prettier/
│       └── tsconfig/
├── .gitignore
├── pnpm-workspace.yaml
├── package.json
└── README.md
```

### 使用 Turborepo

```
monorepo/
├── apps/
│   ├── web/
│   ├── admin/
│   └── mobile/
├── packages/
│   ├── ui/
│   ├── utils/
│   └── config/
├── turbo.json
├── package.json
└── pnpm-workspace.yaml
```

## 配置文件组织

### 环境配置

```
config/
├── env.js                   # 环境配置
├── webpack.js               # Webpack 配置
├── vite.js                  # Vite 配置
└── index.js                 # 导出所有配置

// env.js
const env = {
  development: {
    API_BASE_URL: 'http://localhost:3000/api',
    CDN_URL: 'http://localhost:3001',
  },
  production: {
    API_BASE_URL: 'https://api.example.com',
    CDN_URL: 'https://cdn.example.com',
  },
}

export default env[process.env.NODE_ENV]
```

### 路由配置

```
router/
├── index.js                 # 路由配置入口
├── routes.js                # 路由定义
└── guards.js                # 路由守卫

// routes.js
const routes = [
  {
    path: '/',
    component: () => import('@/pages/Home'),
    meta: { title: '首页' }
  },
  {
    path: '/about',
    component: () => import('@/pages/About'),
    meta: { title: '关于' }
  },
  {
    path: '/dashboard',
    component: () => import('@/pages/Dashboard'),
    meta: { title: '仪表盘', requiresAuth: true }
  }
]

export default routes
```

### 状态管理配置

```
store/
├── index.js                 # Store 入口
├── modules/                 # 模块
│   ├── auth.js
│   ├── user.js
│   └── product.js
└── types.js                 # 类型定义

// modules/auth.js
const state = {
  token: null,
  user: null
}

const mutations = {
  SET_TOKEN(state, token) {
    state.token = token
  },
  SET_USER(state, user) {
    state.user = user
  }
}

const actions = {
  async login({ commit }, credentials) {
    const response = await api.login(credentials)
    commit('SET_TOKEN', response.token)
    commit('SET_USER', response.user)
  }
}

const getters = {
  isAuthenticated: state => !!state.token
}

export default {
  namespaced: true,
  state,
  mutations,
  actions,
  getters
}
```

## 组件组织策略

### 按功能划分

```
components/
├── auth/                    # 认证相关组件
│   ├── LoginForm/
│   ├── RegisterForm/
│   └── ForgotPassword/
├── user/                    # 用户相关组件
│   ├── UserProfile/
│   ├── UserAvatar/
│   └── UserMenu/
└── product/                 # 产品相关组件
    ├── ProductCard/
    ├── ProductList/
    └── ProductDetail/
```

### 按类型划分

```
components/
├── common/                  # 通用组件
│   ├── Button/
│   ├── Input/
│   ├── Modal/
│   └── Loading/
├── layout/                  # 布局组件
│   ├── Header/
│   ├── Footer/
│   ├── Sidebar/
│   └── Container/
└── business/                # 业务组件
    ├── UserCard/
    ├── OrderList/
    └── ShoppingCart/
```

## 样式组织

### CSS Modules

```
src/
├── components/
│   ├── Button/
│   │   ├── Button.jsx
│   │   └── Button.module.css
│   └── Card/
│       ├── Card.jsx
│       └── Card.module.css
└── styles/
    ├── variables.css
    ├── mixins.css
    └── global.css
```

### SCSS

```
src/
├── styles/
│   ├── abstracts/           # 抽象层
│   │   ├── _variables.scss
│   │   ├── _functions.scss
│   │   └── _mixins.scss
│   ├── base/               # 基础层
│   │   ├── _reset.scss
│   │   ├── _typography.scss
│   │   └── _utilities.scss
│   ├── components/         # 组件层
│   │   ├── _buttons.scss
│   │   ├── _cards.scss
│   │   └── _forms.scss
│   ├── layout/             # 布局层
│   │   ├── _header.scss
│   │   ├── _footer.scss
│   │   └── _grid.scss
│   └── main.scss           # 主文件
└── components/
    └── Button/
        ├── Button.jsx
        └── Button.scss
```

## 测试文件组织

```
tests/
├── unit/                   # 单元测试
│   ├── components/
│   │   ├── Button.test.js
│   │   └── Card.test.js
│   ├── hooks/
│   │   ├── useAuth.test.js
│   │   └── useFetch.test.js
│   └── utils/
│       ├── request.test.js
│       └── validate.test.js
├── integration/            # 集成测试
│   └── auth.test.js
├── e2e/                    # 端到端测试
│   ├── login.cy.js
│   └── checkout.cy.js
└── setup.js                # 测试配置
```

## 最佳实践

### 1. 目录命名

```javascript
// 使用小写和连字符
user-profile/
shopping-cart/
order-list/

// 避免使用空格和特殊字符
// 不推荐
User Profile/
Shopping Cart/
```

### 2. 文件命名

```javascript
// 组件文件使用帕斯卡命名法
UserProfile.jsx
Button.jsx
Modal.jsx

// 工具文件使用驼峰命名法
request.js
validate.js
format.js

// 常量文件使用全大写
API_CONSTANTS.js
CONFIG.js
```

### 3. 导入顺序

```javascript
// 1. React 和第三方库
import React from 'react'
import { useState, useEffect } from 'react'
import { useSelector } from 'react-redux'
import { useRouter } from 'next/router'

// 2. 组件
import { Button } from '@/components/common/Button'
import { Header } from '@/components/layout/Header'

// 3. Hooks
import { useAuth } from '@/hooks/useAuth'
import { useFetch } from '@/hooks/useFetch'

// 4. 服务
import { authService } from '@/services/auth'
import { userService } from '@/services/user'

// 5. 工具函数
import { formatDate } from '@/utils/format'
import { validateEmail } from '@/utils/validate'

// 6. 常量
import { API_BASE_URL } from '@/constants/api'

// 7. 样式
import './UserProfile.module.css'
```

### 4. 相对路径 vs 绝对路径

```javascript
// 推荐使用绝对路径（通过别名配置）
import { Button } from '@/components/common/Button'
import { useAuth } from '@/hooks/useAuth'
import { formatDate } from '@/utils/format'

// 避免使用相对路径
// 不推荐
import { Button } from '../../../components/common/Button'
import { useAuth } from '../../hooks/useAuth'
```

### 5. 组件文件组织

```javascript
// UserProfile/
// ├── index.jsx              # 主组件
// ├── UserProfile.jsx        # 组件实现
// ├── UserProfile.module.css # 样式
// ├── components/            # 子组件
// │   ├── UserAvatar/
// │   └── UserMenu/
// ├── hooks/                 # 组件专用 Hooks
// │   └── useUserProfile.js
// ├── utils/                 # 组件专用工具
// │   └── helpers.js
// └── __tests__/             # 测试文件
//     └── UserProfile.test.js
```

## 总结

良好的项目结构是前端工程化的基础，需要：

1. **遵循原则**：单一职责、按功能划分、可扩展性、清晰层次
2. **选择合适的结构**：根据项目规模和团队需求选择合适的项目结构
3. **保持一致性**：在整个项目中保持一致的命名和组织方式
4. **定期审查**：随着项目发展，定期审查和调整项目结构
5. **文档化**：为项目结构编写文档，帮助团队成员理解

通过建立清晰的项目结构，可以大大提高代码的可维护性和开发效率。记住，没有完美的项目结构，只有最适合当前项目的结构。